var p=Object.defineProperty,O=Object.defineProperties,T=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var b=(t,e,r)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C=(t,e)=>{for(var r in e||(e={}))A.call(e,r)&&b(t,r,e[r]);if(h)for(var r of h(e))L.call(e,r)&&b(t,r,e[r]);return t},M=(t,e)=>O(t,R(e));var l=(t,e)=>()=>(t&&(e=t(t=0)),e);var V=(t,e)=>{for(var r in e)p(t,r,{get:e[r],enumerable:!0})},$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of q(e))!A.call(t,o)&&o!==r&&p(t,o,{get:()=>e[o],enumerable:!(n=T(e,o))||n.enumerable});return t};var H=t=>$(p({},"__esModule",{value:!0}),t);function d(t,e){if(typeof __html__=="undefined")throw new Error("No UI defined");let r=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof e=="undefined"?{}:e)};${__html__}</script>`;figma.showUI(r,M(C({},t),{themeColors:typeof t.themeColors=="undefined"?!0:t.themeColors}))}var S=l(()=>{});var w=l(()=>{S()});function E(){return{stripeDensity:80,widthVariation:30,frosting:50,clarity:70,refractionIntensity:30,depth:50,dispersion:20,lightIntensity:50,lightAngle:45,blurZoneCount:5,quality:"standard",randomSeed:Date.now()}}function N(t,e){let r={width:"width"in t?t.width:0,height:"height"in t?t.height:0,x:"x"in t?t.x:0,y:"y"in t?t.y:0},n=e.quality==="draft"?{stripeMult:.5}:e.quality==="high"?{stripeMult:1.75}:{stripeMult:1},o=figma.createFrame();o.name="Glass Overlay",o.resize(r.width,r.height),o.x=r.x,o.y=r.y,o.fills=[],o.clipsContent=!1;let a=Math.floor(e.stripeDensity*n.stripeMult);return W(r,a,e.widthVariation,e.frosting,e.refractionIntensity,e.depth,e.dispersion,e.lightIntensity,e.lightAngle,e.randomSeed).forEach(u=>o.appendChild(u)),o.opacity=e.clarity/100,o}function W(t,e,r,n,o,a,g,u,U,x){let c=[],y=t.width/e,f=0;for(let i=0;i<e;i++){let m=y;if(r>0){let s=(I(x+i)-.5)*(r/100)*2;m=y*(1+s)}c.push({x:f,width:m}),f+=m}let F=c.reduce((i,m)=>i+m.width,0),G=t.width/F;f=0;for(let i of c)i.width*=G,i.x=f,f+=i.width;return c.map((i,m)=>{let s=figma.createFrame();return s.name=`Glass Pane ${m+1}`,s.x=i.x,s.y=0,s.resize(Math.max(1,i.width),t.height),s.fills=[],s.clipsContent=!1,s.effects=[{type:"GLASS",visible:!0,lightIntensity:u/100,lightAngle:U+I(x+m*2)*10-5,refraction:o/100*1,depth:1+a/100*99,dispersion:g/100,radius:n/100*50}],s})}function I(t){let e=Math.sin(t)*1e4;return e-Math.floor(e)}var _=l(()=>{});var D={};V(D,{default:()=>B});function B(){d({width:320,height:500}),v(),figma.on("selectionchange",()=>{v()}),figma.ui.onmessage=t=>{var e;if(t.type==="apply-effect"){let r=figma.currentPage.selection;if(r.length===0){figma.ui.postMessage({type:"error",message:"Please select a layer to apply the effect"});return}let n=r[0];if(n.type!=="FRAME"&&n.type!=="GROUP"){figma.ui.postMessage({type:"error",message:"Effect can only be applied to frames or groups"});return}let o=(e=t.settings)!=null?e:E();try{let a=N(n,o);"x"in n&&"y"in n&&(a.x=n.x,a.y=n.y),figma.ui.postMessage({type:"success",message:"Effect applied! Press Cmd/Ctrl+Z to undo."})}catch(a){figma.ui.postMessage({type:"error",message:`Error applying effect: ${a instanceof Error?a.message:"Unknown error"}`})}}}}function v(){let t=figma.currentPage.selection.length>0;if(figma.ui.postMessage({type:"selection-changed",hasSelection:t}),t){let e=figma.currentPage.selection[0];"exportAsync"in e&&e.exportAsync({format:"PNG",constraint:{type:"SCALE",value:.5}}).then(r=>{let n=figma.base64Encode(r);figma.ui.postMessage({type:"preview-image",previewImage:n})}).catch(r=>{console.error("Failed to export preview:",r)})}}var P=l(()=>{w();_()});var X={"src/main/main.ts--default":(P(),H(D)).default},z="src/main/main.ts--default";X[z]();
